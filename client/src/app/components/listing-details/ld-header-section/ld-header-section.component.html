<section class="py-6">
  <div class="flex justify-between items-center flex-wrap gap-4">
    <h1 class="text-2xl font-semibold">
      {{ headerData?.title || "Laddar..." }}
    </h1>

    <ul class="flex space-x-4 text-sm text-gray-700">
      <li>
        <app-link linkType="icon">
          <a routerLink="#" class="flex items-center">
            <i class="bi bi-box-arrow-in-up mr-1"></i>Dela
          </a>
        </app-link>
      </li>
      <li>
        <app-link linkType="icon">
          <a routerLink="#" class="flex items-center">
            <i class="bi bi-heart mr-1"></i>Spara
          </a>
        </app-link>
      </li>
    </ul>
  </div>

  <!-- Vid laddning av data visas tomma divs med animerade laddningsindikatorer -->
  <div
    *ngIf="isLoading"
    class="grid grid-cols-1 md:grid-cols-4 gap-2 mt-4 rounded-xl overflow-hidden"
  >
    <div class="md:col-span-2 row-span-2 bg-gray-200 animate-pulse h-96"></div>
    <div class="bg-gray-200 animate-pulse h-48"></div>
    <div class="bg-gray-200 animate-pulse h-48"></div>
    <div class="bg-gray-200 animate-pulse h-48"></div>
    <div class="bg-gray-200 animate-pulse h-48"></div>
  </div>

  <div *ngIf="error" class="mt-4 p-4 bg-red-100 text-red-700 rounded-lg">
    {{ error }}
  </div>

  <!-- Bildgalleri som visas nÃ¤r data Ã¤r laddad -->
  <div
    *ngIf="!isLoading && !error"
    class="grid grid-cols-1 md:grid-cols-4 gap-2 mt-4 rounded-xl overflow-hidden"
  >
    <!-- Huvudbild -->
    <div class="md:col-span-2 row-span-2" *ngIf="images[0]">
      <img
        [src]="images[0].image_url"
        [alt]="'Huvudbild fÃ¶r ' + headerData?.title"
        class="w-full h-full object-cover"
        (error)="handleImageError($event)"
      />
    </div>

    <!-- SekundÃ¤ra bilder -->
    <ng-container *ngFor="let image of images.slice(1, 5); let i = index">
      <div *ngIf="image">
        <img
          [src]="image.image_url"
          [alt]="'Bild ' + (i + 2) + ' fÃ¶r ' + headerData?.title"
          class="w-full h-full object-cover"
          (error)="handleImageError($event)"
        />
      </div>
    </ng-container>

    <!-- "Visa alla"-knapp -->
    <div class="relative" *ngIf="images.length > 5">
      <img
        [src]="images[4].image_url"
        [alt]="'Bild 5 fÃ¶r ' + headerData?.title"
        class="w-full h-full object-cover"
        (error)="handleImageError($event)"
      />
      <button
        (click)="toggleShowAllPhotos()"
        class="absolute bottom-2 right-2 bg-white bg-opacity-90 text-gray-950 border border-gray-950 leading-5 cursor-pointer text-sm font-medium px-4 py-2 rounded-lg shadow-md hover:bg-opacity-100 transition"
      >
        <i class="bi bi-grid-3x3-gap"></i>
        Visa alla foton
      </button>
    </div>
  </div>

  <!-- Modal - FullstÃ¤ndigt bildgalleri -->
  <div
    *ngIf="showAllPhotos"
    class="fixed inset-0 bg-black bg-opacity-90 z-50 overflow-y-auto"
  >
    <div class="container mx-auto px-4 py-8">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-2xl font-semibold text-white">Alla foton</h2>
        <button
          (click)="toggleShowAllPhotos()"
          class="text-white hover:text-gray-300"
        >
          <i class="bi bi-x-lg text-2xl"></i>
        </button>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        <ng-container *ngFor="let image of images">
          <div class="relative">
            <img
              [src]="image.image_url"
              [alt]="'Bild fÃ¶r ' + headerData?.title"
              class="w-full h-64 object-cover rounded-lg"
              (error)="handleImageError($event)"
            />
          </div>
        </ng-container>
      </div>
    </div>
  </div>

  <!-- Detaljer om lÃ¤genheten -->
  <section class="mt-6">
    <div class="text-lg font-medium">{{ headerData?.title }}</div>
    <div class="text-sm text-gray-600 mt-1">
      {{ headerData?.guests }} gÃ¤ster Â· {{ headerData?.bedrooms }} sovrum Â·
      {{ headerData?.bathrooms }} badrum
    </div>

    <!-- Betyg och omdÃ¶men. TODO: ErsÃ¤tt med faktiska data -->
    <section class="rating flex justify-between">
      <div class="flex items-center text-sm text-gray-600 mt-1">
        <i class="bi bi-star-fill text-black mr-1"></i>
        <span class="text-black font-medium">4,92</span>
        <span class="mx-1">Â·</span>
        <span class="underline cursor-pointer">280 omdÃ¶men</span>
      </div>
      <div
        class="inline-block text-brand-dark text-sm font-semibold rounded-xl shadow-md border px-4 py-2 border-gray-200"
      >
        ðŸ’Ž SÃ¤llsynt fynd! Detta stÃ¤lle Ã¤r vanligtvis bokat
      </div>
    </section>
  </section>
</section>
